{#
    StaticForge "StaticForce" Theme - Base Layout
    =============================================
    This is the master layout file that all other templates should extend.
    It defines the global HTML structure, including the head, navigation,
    main content wrapper, sidebar structure, and footer.

    Variables Available:
    -------------------
    Global Variables (available in all templates):
    - site_name: (string) The name of the site (from .env or siteconfig.yaml)
    - site_base_url: (string) The full base URL with trailing slash
    - title: (string) Page title
    - description: (string) Page meta description

    Feature-Dependent Variables:
    - cache_buster: (string) A unique hash for cache busting assets.
                    [REQUIRED FEATURE: CacheBusterFeature]
    - tags: (string|array) Page keywords/tags.
            [REQUIRED FEATURE: TagsFeature]
    - search_json: (implied) The search.json file referenced in scripts.
                   [REQUIRED FEATURE: Search (SearchIndexService)]

    Menu Variables:
    [REQUIRED FEATURE: MenuBuilder]
    - menu_top: (html) The top navigation menu (if defined in siteconfig.yaml > menu > top)
    - menu1: (html) The primary sidebar menu (generated from content with menu: 1.x)

    Blocks:
    -------
    - title: Page title tag content
    - extra_head: Additional tags for <head> (CSS, JS, meta)
    - search_bar: Search input container
    - body: The entire body content. Override this to change the main layout structure (e.g. remove sidebars).
    - content: The main content area where {{ content }} is injected.
    - search_scripts: Javascript for search functionality.
    - scripts: Additional footer scripts.
#}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ title | default('Documentation') }}{% if site_name %} | {{ site_name }}{% endif %}{% endblock %}</title>
    {% if description %}
    <meta name="description" content="{{ description }}">
    {% endif %}
{% if tags is defined and tags %}
{% if tags is iterable %}
{% if tags|length > 0 %}
    <meta name="keywords" content="{{ tags|join(', ') }}">
{% endif %}
{% else %}
    <meta name="keywords" content="{{ tags }}">
{% endif %}
{% endif %}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ site_base_url }}assets/css/main.css?{{ cache_buster }}">
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="{{ site_base_url|default('/') }}" class="navbar-brand">
                <div class="navbar-logo">SF</div>
                <span>StaticForge</span>
            </a>
            {% if menu_top %}
            <div class="navbar-menu-wrapper">
                {{ menu_top|raw }}
            </div>
            {% endif %}

            {% block search_bar %}
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Search docs...">
                <div id="search-results" class="search-results"></div>
            </div>
            {% endblock %}
        </div>
    </nav>

    <!-- Main Content -->
    {% block body %}
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            {{ menu1|raw }}
        </aside>

        <!-- Main Content -->
        <main class="content">
            {% block content %}
                {{ content|raw }}
            {% endblock %}
        </main>
    </div>
    {% endblock %}

    {% include 'staticforce/_footer.html.twig' %}

    <script src="{{ site_base_url }}assets/js/main.js"></script>
    {% block search_scripts %}
    <script src="{{ site_base_url }}assets/js/search.js"></script>
    <script>
        if (window.StaticForgeSearch) {
            window.StaticForgeSearch.init({
                inputSelector: '#search-input',
                resultsSelector: '#search-results',
                minisearchPath: '{{ site_base_url }}assets/js/minisearch.min.js',
                indexPath: '{{ site_base_url }}search.json'
            });
        }
    </script>
    {% endblock %}
    {% block scripts %}{% endblock %}
</body>
</html>
